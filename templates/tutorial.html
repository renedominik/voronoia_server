{% extends "base.html" %}

{% block head %}
{{super()}}
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/tutorialStyle.css')}}" media="all">
{% endblock %}

{% block header %}
  {{super()}}
{% endblock %}

{% block content %}
<section>
    <center>
        <h1>Tutorial</h1>
        <div id="modeSelect">
            <i id="icon_vid" class="active">play_arrow</i>
            <i id="icon_txt">format_align_left</i>
        </div>
        <div id="vid" class="contentBody active">
            <h2>V I D E O</h2>
            <!-- <iframe width="100%" height="400rem" src="https://www.youtube.com/embed/dQw4w9WgXcQ?showinfo=0"></iframe> -->
            <iframe width="100%" height="400rem" src="https://www.youtube.com/embed/nVoDO6EhC1A" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div id="txt" class="contentBody">
            <h2>D A T A B A S E</h2>
            <h3>Explore the Database</h3>

            <p>Voronoia contains a database of over 160.000 precalculated structures, including most of the structures found in the Protein Data Bank. You can browse these 
                structures in a table on the subpage <a href="database">database</a>.
            </p>
            
            <!-- img: db site -->
            
            <p>
            To search a specific entry, click on the input field and
                type in the PDB-ID of the structure you wish to view. </p>

            <!-- img: search db -->

            <p>You will be taken to the results subpage, where you can view and explore the
                data generated by Voronoia.
            </p>

            <h2>S U B M I T</h2>
            <h3>Load an Example</h3>

            <p>If you want to test out the submission process on Voronoia with an example, you can visit the <a href="submit">submit</a> page and click on the green icon in 
                the lower left, under the grey box. This will take you to an already filled out form which you usually need to fill out yourself to submit a structure for 
                calculation with Voronoia. You can play around with the input if you like or you can directly click on the green Analyse button. You need to wait a few minutes 
                for the calculation to finish and after that you will be redirected to the results page, where you can analyse the example PDB with Voronoia.
            </p>

            <h3>Upload own Structures</h3>

            <p>Since not all known macromolecular structures are deposited in the database and you may wish to analyse unpublished structures, you can submit a new structure for
                calculation under the <a href="submit">submit</a> subpage.
            </p>

            <!-- img: submit site -->
                
            <p>
                To submit your structure you first need to upload a pdb file. You can click on the green button titled 'Upload a PDB' to browse your filesystem for a file to be uploaded,
                or you can drag and drop a file into the grey box with the dashed outline.
            </p>

            <!-- img: uploading a pbd, open file manager -->

            <p>
                When you have uploaded a file, you will see a new form for submission appear. You need to enter an id, a unique string which identifies your job unambiguously. Alternativly you can also click on the dice 
                icon, which will generate a random tag for you. If you want to be notified when your results are ready, you can optionally enter an email adress. 
            </p>

            <!-- img: filled out form -->

            <p>
                Once you have entered all required informations, you can click on the green submit button on the bottom of the page. You will now be redirected to the progress 
                site, where you can view the status of your job while it is in queue or being calculated.
            </p>

            <!-- img: progress site -->

            <p>
                The calculation may take a while (up to 15 minutes, exceptionally large structures taking even longer). You don't need to keep the tab open to access your results,
                as long as you copy the link shown on the page. When the calculation is finished, you will be redirected to the results subpage.
            </p>


            <h2>R E S U L T S</h2>
            <h3>Visual Output</h3>

            <p>In the results page you can view a structure that has been analysed with Voronoia. You can see a view box in the middle of the page, where the structure is shown
                as well as an array of balls with different sizes. These balls represent cavities in the structure, which could potentially hold water molecules. Blue balls indicate
                polar cavities, which have a higher probability of containing water molecules, red balls on the other hand represent cavities which are mostly hydrophobic and 
                therefor less likely to hold water molecules. The atoms surrounding cavities are highlighted, allowing you to investigate the cavities on your own.
            </p>

            <p>
                The structure is colored by the packing density of the atoms, with red representing areas of low packing density and high flexibiliy, white showing average values of
                packing density and blue color indicating exceptionally rigid regions of the structure. Intermediate values are colored as mixed shades.
            </p>

            <!-- img: results -->

            <p>If you want to examine the structure in a bigger view box <!-- and with more powerful tools, -->you can click on the fullscreen icon located under the view box on the right.
                
                <!-- Clicking on the icon will open a fullscreen NGL-viewer with the structure, enabling you to change representations, load additional structures and much more.  -->
            </p>

            <!-- img: menu -->

            <p>You can also download the results as a zip file on the results subpage by clicking on the download icon under the view box. The zip file contains a vor.pdb file, an 
                holes.pdb file as well as a neighbors.pdb file which contains all atoms neighbouring cavities.
            </p>

            <!-- img: zip file -->

            <h3>Result Files</h3>
            <p>When you download the results for the structure you wish to analyse, you will find three files: protein.vor.pdb, protein_holes.pdb and 
                protein_neighbors.pdb. protein.vor.pdb is a PDB file with some additional information generated by Voronoia: every ATOM-line in the original PDB is extended by the 
                van der Waals-volume of the atom, the solvent excluded volume of the atom and a bit (a zero or a one), which shows whether the atom is solvent accesible (1) or
                burried in other atoms with no surface which the solvent can reach (0).
            </p>

            <p>protein_holes.pdb is a pdb file that stores the position as well as approximate radius of every cavity that Voronoia calculated. The cavities are stored as hydrogen atoms
                in the PDB, with the B-Factor storing the radius in Angstrom. Storing the information in a PDB-file allows for the visualisation of the cavities in programs that are 
                designed for the visualisation of PDB structures. The Polarity of the cavity is stored in the occupancy column.
            </p>

            <p>The protein_neighbors.pdb file contains all atoms that neighbor cavities. By examining these atoms one can better determine the probability of a water molecule 
                residing in a particular cavity. </p>

            <p>Thank you for using Voronoia!</p>
        </div>
    </center>
</section>
{% endblock %}


{% block scripts %}
{{super()}}
<script>

    $('#icon_txt').on('click', function() {
        // remove active class from vid, icon_vid 
        $('#vid').removeClass('active');
        $('#icon_vid').removeClass('active');

        // add active class to txt, icon_txt
        $('#txt').addClass('active');
        $('#icon_txt').addClass('active');
    });

    $('#icon_vid').on('click', function() {
        // remove active class from txt, icon_txt 
        $('#txt').removeClass('active');
        $('#icon_txt').removeClass('active');
        
        // add active class to vid, icon_vid
        $('#vid').addClass('active');
        $('#icon_vid').addClass('active');
    });

</script>
{% endblock %}